!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("stream")):"function"==typeof define&&define.amd?define(["stream"],t):e.ReactDOMServer=t(e.stream)}(this,function(o){var e="function"==typeof Symbol&&Symbol.for,n=Object.prototype.hasOwnProperty,t=e?Symbol.for("react.element"):60103;function a(e){return e.children}function f(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e}var r=Object.prototype.toString;var i=/[^, ]+/g;function c(e,t){e+""===e&&(e=e.match(i)||[]);for(var r={},n=void 0!==t?t:1,o=0,a=e.length;o<a;o++)r[e[o]]=n;return r}var u=c(["beforeProps","afterCreate","beforeInsert","beforeDelete","beforeUpdate","afterUpdate","beforePatch","afterPatch","beforeUnmount","afterMount"],function(){}),l={"[object Boolean]":2,"[object Number]":3,"[object String]":4,"[object Function]":5,"[object Symbol]":6,"[object Array]":7};function s(e){return null===e?1:void 0===e?0:l[r.call(e)]||8}function p(){return this}var d={mountOrder:1,currentOwner:null,controlledCbs:[],fireRef:function(e,t,r){(e._disposed||e._isStateless)&&(t=null);var n=r.ref;if("function"==typeof n)return n(t);if(n&&Object.prototype.hasOwnProperty.call(n,"current"))n.current=t;else if(n){var o=r._owner;if(!o)throw"Element ref was specified as a string ("+n+") but no owner was set";t?(t.nodeType&&(t.getDOMNode=p),o.refs[n]=t):delete o.refs[n]}}};function v(e,t,r,n,o){if(this.type=e,6!==(this.tag=t)){this.props=r,this._owner=d.currentOwner,n&&(this.key=n);var a=s(o);3!==a&&4!==a&&5!==a&&8!==a||(this._hasRef=!0,this.ref=o)}u.afterCreate(this)}v.prototype={getDOMNode:function(){return this.stateNode||null},$$typeof:t};var y=void 0,b=void 0,h=void 0;function m(e,t){var r=s(e);if(r<3)y=null;else{if(r<5){if(y)return void(y.text+=e);n=e+"",(o=new v("#text",6)).text=n,y=e=o}else y=null;var n,o;h["."+t]?h[t="."+b]=e:h["."+t]=e,e.index=b++}}function g(e,t){return h={},void(b=0)!==e&&(y=null,function r(e,n,o,t,a){var i=void 0,c=void 0,u=void 0,l=void 0;switch(t){case 0:if(Object(e)===e&&!e.call&&!e.type)throw"children中存在非法的对象";i=n||(e&&e.key?"$"+e.key:"0"),o(e,i);break;case 1:e.forEach(function(e,t){r(e,x(e,t,n,a),o,k(e),!1)});break;case 2:i=e&&e.key?"$"+e.key:"",i=a?i:n?n+":0":i||"0",c=e.props.children,(u=k(c))||(c=[c],u=1),r(c,i,o,u,!1);break;default:l=t.call(e);for(var f,s=0;!(f=l.next()).done;)c=f.value,r(c,x(c,s,n,a),o,k(c),!1),s++}}(e,"",m,k(e),!0)),b=0,t._children=h}function x(e,t,r,n){var o=t+"";return e&&(o=e.type==a?e.key?"":o:e.key?"$"+e.key:o),!n&&r?r+":"+o:o}function k(e){if(e instanceof Object){if(e.forEach)return 1;if(e.type===a)return 2;var t=function(e){var t=w&&e[w]||e[S];if(t&&t.call)return t}(e);if(t)return t}return 0}var w=e&&Symbol.iterator,S="@@iterator";function j(e){this.nodeName=e,this.style={},this.children=[]}var N=j.prototype={contains:Boolean};String("replaceChild,appendChild,removeAttributeNS,setAttributeNS,removeAttribute,setAttribute,getAttribute,insertBefore,removeChild,addEventListener,removeEventListener,attachEvent,detachEvent").replace(/\w+/g,function(e){N[e]=function(){console.log("fire "+e)}});var O=new j;O.createElement=O.createElementNS=O.createDocumentFragment=function(e){return new j(e)},O.createTextNode=O.createComment=Boolean,O.documentElement=new j("html"),O.body=new j("body"),O.nodeName="#document",O.textContent="";try{var C=window;C.alert}catch(e){!1,C={document:O}}var M=C,A=C.document||O,E=(A.createDocumentFragment(),{88:7,80:6,"00":NaN,"08":NaN}),_=A.documentMode||E[s(A.all)+""+s(M.XMLHttpRequest)];/NaN|undefined/.test(_);var T=/["'&<>]/;function L(e){return"boolean"==typeof e||"number"==typeof e?""+e:function(e){var t,r=""+e,n=T.exec(r);if(!n)return r;var o="",a=0,i=0;for(a=n.index;a<r.length;a++){switch(r.charCodeAt(a)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==a&&(o+=r.substring(i,a)),i=a+1,o+=t}return i!==a?o+r.substring(i,a):o}(e)}var $=/^-?\d+(\.\d+)?$/,F=c("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),I=(c("float","cssFloat"),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),D={ref:1,key:1,children:1,dangerouslySetInnerHTML:1,innerHTML:1},H={styleFloat:"float",cssFloat:"float"},P=/^xlink:?(.+)/;function R(e){var t=[];for(var r in e)e[r]&&t.push(r);return t.join(" ")}var W={};function B(e){var t,r=[];for(var n in e){var o=e[n];if(null!=e){var a="";$.test(o)&&!F[n]&&(a="px"),r.push((H[t=n]?H[t]:H[t]=t.replace(/([A-Z])/g,"-$1").toLowerCase())+": "+o+a)}}return r.join("; ")}var V={select:1,input:1,textarea:1};function q(e,t){var r,n,o=[];for(var a in e){var i=e[a];if(!D[a]){var c=!1;if("className"===a||"class"===a)a="class",i&&"object"===(void 0===i?"undefined":I(i))&&(i=R(i),c=!0);else if("style"===a){if(Object(i)!=i)continue;i=B(i),c=!0}else"defaultValue"===a?V[t]&&(a="value"):"defaultChecked"===a?V[t]&&(a="checked",c=!(i="")):a.match(P)&&(a=a.toLowerCase().replace(P,"xlink:$1"));(c||!1!==(n=i)&&Object(n)!==n)&&o.push(a+"="+(W[r=i+""]?W[r]:W[r]='"'+L(r)+'"'))}}return o.length?" "+o.join(" "):""}var U={mark:function(){}},z=U.mark(X);function G(e,t){var r=e,n=r.tag,o=r.type,a=r.props;switch(o){case"#text":return L(e.text);case"#comment":return"\x3c!--"+e.text+"--\x3e";default:var i=a&&a.dangerouslySetInnerHTML;if(i=i&&i.__html,5===n){if("option"===o){for(var c=e.return;c&&"select"!==c.type;c=c.return);if(c&&c.valuesSet){var u=Z(e);c.valuesSet["&"+u]&&(a=Object.assign({selected:""},a))}}else if("select"===o){var l=e.props.value||e.props.defaultValue;if(null!=l){var f=[].concat(l),s={};f.forEach(function(e){s["&"+e]=!0}),e.valuesSet=s}}var p="<"+o+q(a,o);if(J[o])return p+"/>\n";if(p+=">",i)p+=i;else{var d="",v={_reactInternalFiber:e},y=g(a.children,v);for(var b in y){var h=y[b];h.return=e,d+=G(h,t)}e.updater=v}return"textarea"!==e.type||d?p+=d:p+=e.props.value||e.props.defaultValue||"",p+"</"+o+">\n"}if(n<3){var m={context:t};return G(e=K(e,m),t=m.context)}if(Array.isArray(e)){var x="";return e.forEach(function(e){x+=G(e,t)}),x}throw"数据不合法"}}function X(t,r){var n,o,a,i,c,u,l,f,s,p,d,v,y,b,h,m,x;return U.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=(n=t).tag,a=n.type,i=n.props,e.t0=a,e.next="#text"===e.t0?4:"#comment"===e.t0?7:10;break;case 4:return e.next=6,L(t.text);case 6:return e.abrupt("break",40);case 7:return e.next=9,"\x3c!--"+t.text+"--\x3e";case 9:return e.abrupt("break",40);case 10:if(c=(c=i&&i.dangerouslySetInnerHTML)&&c.__html,5!==o){e.next=24;break}if("option"===a){for(u=t.return;u&&"select"!==u.type;u=u.return);u&&u.valuesSet&&(l=Z(t),u.valuesSet["&"+l]&&(i=Object.assign({selected:""},i)))}else"select"===a&&null!=(f=t.props.value||t.props.defaultValue)&&(s=[].concat(f),p={},s.forEach(function(e){p["&"+e]=!0}),t.valuesSet=p);if(d="<"+a+q(i,a),!J[a]){e.next=18;break}return e.next=18,d+"/>\n";case 18:if(d+=">",c)d+=c;else{for(b in v={vnode:t},y=g(i.children,v))(h=y[b]).return=t,d+=G(h,r);t.updater=v}return e.next=22,d+"</"+a+">\n";case 22:e.next=40;break;case 24:if(!(o<3)){e.next=32;break}return t=K(t,m={context:r}),r=m.context,e.next=30,G(t,r);case 30:e.next=40;break;case 32:if(!Array.isArray(t)){e.next=39;break}return x="",t.forEach(function(e){x+=G(e,r)}),e.next=37,x;case 37:e.next=40;break;case 39:throw"数据不合法";case 40:case"end":return e.stop()}},z,this)}function Z(e){if("value"in e.props)return e.props.value;var t=e.props.children;return t+""=="a"?t:t.text}var J=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];function K(e,t){var r,n,o,a,i=t.context,c=e.type;if(e.tag<3){var u=e.props,l=function(e,t){var r={};if(!t||!e)return r;for(var n in t)t.hasOwnProperty(n)&&(r[n]=e[n]);return r}(i,c.contextTypes);if(1===e.tag)(n=c(u,l))&&n.render&&(n=n.render()),r={};else{if((r=new c(u,l)).props=r.props||u,r.context=r.context||l,r.componentWillMount)try{r.componentWillMount()}catch(e){}n=r.render()}return n=Q(n),r.componentWillMount&&r.componentWillMount(),r.getChildContext&&(t.context=(o=i,(a=r.getChildContext())&&(o=f(f({},o),a)),o)),Array.isArray(n)?n.map(function(e){return K(e,t)}):K(n,t)}return e}function Q(e){var t=s(e);return t<3?{tag:6,text:"",type:"#text"}:t<5?{tag:6,text:e+"",type:"#text"}:e}function Y(e,t){return G(Q(e),t||{})}function ee(e,t){var r=new o.Readable,n=X(e,t||{});return r._read=function(){var e=n.next();e.done?r.push(null):r.push(e.value.toString())},r}return{renderToString:Y,renderToStaticMarkup:Y,renderToNodeStream:ee,renderToStaticNodeStream:ee}});