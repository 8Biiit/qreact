!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("stream")):"function"==typeof define&&define.amd?define(["stream"],t):e.ReactDOMServer=t(e.stream)}(this,function(e){function t(e){return e.children}function r(e,t){for(var r in t)L.call(t,r)&&(e[r]=t[r]);return e}function n(e,t){e+""===e&&(e=e.match(I)||[]);for(var r={},n=void 0!==t?t:1,o=0,a=e.length;o<a;o++)r[e[o]]=n;return r}function o(e){return null===e?1:void 0===e?0:H[F.call(e)]||8}function a(){return this}function i(e,t,r,n,a){if(this.type=e,this.tag=t,6!==t){this.props=r,this._owner=P.currentOwner,n&&(this.key=n);var i=o(a);3!==i&&4!==i&&5!==i&&8!==i||(this._hasRef=!0,this.ref=a)}D.afterCreate(this)}function u(e,t){var r=new i(e,6);return r.text=t,r}function c(e,t){var r=o(e);if(r<3)R=null;else{if(r<5){if(R)return void(R.text+=e);R=e=u("#text",e+"")}else R=null;B["."+t]?B[t="."+W]=e:B["."+t]=e,e.index=W++}}function f(e,t){return B={},W=0,void 0!==e&&(R=null,p(e,"",c,s(e),!0)),W=0,t._children=B}function l(e,r,n,o){var a=r+"";return e&&(a=e.type==t?e.key?"":a:e.key?"$"+e.key:a),!o&&n?n+":"+a:a}function s(e){if(e instanceof Object){if(e.forEach)return 1;if(e.type===t)return 2;var r=d(e);if(r)return r}return 0}function p(e,t,r,n,o){var a=void 0,i=void 0,u=void 0,c=void 0;switch(n){case 0:if(Object(e)===e&&!e.call&&!e.type)throw"children中存在非法的对象";a=t||(e&&e.key?"$"+e.key:"0"),r(e,a);break;case 1:e.forEach(function(e,n){p(e,l(e,n,t,o),r,s(e),!1)});break;case 2:a=e&&e.key?"$"+e.key:"",a=o?a:t?t+":0":a||"0",(u=s(i=e.props.children))||(i=[i],u=1),p(i,a,r,u,!1);break;default:c=n.call(e);for(var f,d=0;!(f=c.next()).done;)p(i=f.value,l(i,d,t,o),r,s(i),!1),d++}}function d(e){var t=V&&e[V]||e[q];if(t&&t.call)return t}function v(e){this.nodeName=e,this.style={},this.children=[]}function y(e,t){var r={};if(!t||!e)return r;for(var n in t)t.hasOwnProperty(n)&&(r[n]=e[n]);return r}function b(e,t){var n=e.getChildContext();return n&&(t=r(r({},t),n)),t}function h(e){var t=""+e,r=Q.exec(t);if(!r)return t;var n,o="",a=0,i=0;for(a=r.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#x27;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}i!==a&&(o+=t.substring(i,a)),i=a+1,o+=n}return i!==a?o+t.substring(i,a):o}function m(e){return"boolean"==typeof e||"number"==typeof e?""+e:h(e)}function x(e){return ne[e]?ne[e]:ne[e]=e.replace(/([A-Z])/g,"-$1").toLowerCase()}function g(e){var t=[];for(var r in e)e[r]&&t.push(r);return t.join(" ")}function k(e){return ae[e]?ae[e]:ae[e]='"'+m(e)+'"'}function w(e){return!1!==e&&Object(e)!==e}function S(e){var t=[];for(var r in e){var n=e[r];if(null!=e){var o="";Y.test(n)&&!ee[r]&&(o="px"),t.push(x(r)+": "+n+o)}}return t.join("; ")}function j(e,t){var r=[];for(var n in e){var o=e[n];if(!re[n]){var a=!1;if("className"===n||"class"===n)n="class",o&&"object"===(void 0===o?"undefined":te(o))&&(o=g(o),a=!0);else if("style"===n){if(Object(o)!=o)continue;o=S(o),a=!0}else"defaultValue"===n?ie[t]&&(n="value"):"defaultChecked"===n?ie[t]&&(n="checked",o="",a=!0):n.match(oe)&&(n=n.toLowerCase().replace(oe,"xlink:$1"));(a||w(o))&&r.push(n+"="+k(o+""))}}return r.length?" "+r.join(" "):""}function N(e,t){var r=e,n=r.tag,o=r.type,a=r.props;switch(o){case"#text":return m(e.text);case"#comment":return"\x3c!--"+e.text+"--\x3e";default:var i=a&&a.dangerouslySetInnerHTML;if(i=i&&i.__html,5===n){if("option"===o){for(var u=e.return;u&&"select"!==u.type;u=u.return);if(u&&u.valuesSet){var c=C(e);u.valuesSet["&"+c]&&(a=Object.assign({selected:""},a))}}else if("select"===o){var l=e.props.value||e.props.defaultValue;if(null!=l){var s={};[].concat(l).forEach(function(e){s["&"+e]=!0}),e.valuesSet=s}}var p="<"+o+j(a,o);if(fe[o])return p+"/>\n";if(p+=">",i)p+=i;else{var d="",v={_reactInternalFiber:e},y=f(a.children,v);for(var b in y){var h=y[b];h.return=e,d+=N(h,t)}e.updater=v}return"textarea"!==e.type||d?p+=d:p+=e.props.value||e.props.defaultValue||"",p+"</"+o+">\n"}if(n<3){var x={context:t};return e=M(e,x),t=x.context,N(e,t)}if(Array.isArray(e)){var g="";return e.forEach(function(e){g+=N(e,t)}),g}throw"数据不合法"}}function O(e,t){var r,n,o,a,i,u,c,l,s,p,d,v,y,b,h,x,g;return ue.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:n=(r=e).tag,o=r.type,a=r.props,k.t0=o,k.next="#text"===k.t0?4:"#comment"===k.t0?7:10;break;case 4:return k.next=6,m(e.text);case 6:return k.abrupt("break",40);case 7:return k.next=9,"\x3c!--"+e.text+"--\x3e";case 9:return k.abrupt("break",40);case 10:if(i=a&&a.dangerouslySetInnerHTML,i=i&&i.__html,5!==n){k.next=24;break}if("option"===o){for(u=e.return;u&&"select"!==u.type;u=u.return);u&&u.valuesSet&&(c=C(e),u.valuesSet["&"+c]&&(a=Object.assign({selected:""},a)))}else"select"===o&&null!=(l=e.props.value||e.props.defaultValue)&&(s=[].concat(l),p={},s.forEach(function(e){p["&"+e]=!0}),e.valuesSet=p);if(d="<"+o+j(a,o),!fe[o]){k.next=18;break}return k.next=18,d+"/>\n";case 18:if(d+=">",i)d+=i;else{v={vnode:e},y=f(a.children,v);for(b in y)(h=y[b]).return=e,d+=N(h,t);e.updater=v}return k.next=22,d+"</"+o+">\n";case 22:k.next=40;break;case 24:if(!(n<3)){k.next=32;break}return x={context:t},e=M(e,x),t=x.context,k.next=30,N(e,t);case 30:k.next=40;break;case 32:if(!Array.isArray(e)){k.next=39;break}return g="",e.forEach(function(e){g+=N(e,t)}),k.next=37,g;case 37:k.next=40;break;case 39:throw"数据不合法";case 40:case"end":return k.stop()}},ce,this)}function C(e){if("value"in e.props)return e.props.value;var t=e.props.children;return t+""=="a"?t:t.text}function M(e,t){var r,n,o=t.context,a=e.type;if(e.tag<3){var i=e.props,u=y(o,a.contextTypes);if(1===e.tag)(n=a(i,u))&&n.render&&(n=n.render()),r={};else{if(r=new a(i,u),r.props=r.props||i,r.context=r.context||u,r.componentWillMount)try{r.componentWillMount()}catch(e){}n=r.render()}return n=A(n),r.componentWillMount&&r.componentWillMount(),r.getChildContext&&(t.context=b(r,o)),Array.isArray(n)?n.map(function(e){return M(e,t,r)}):M(n,t,r)}return e}function A(e){var t=o(e);return t<3?{tag:6,text:"",type:"#text"}:t<5?{tag:6,text:e+"",type:"#text"}:e}function E(e,t){return N(A(e),t||{})}function _(t,r){var n=new e.Readable,o=O(t,r||{});return n._read=function(){var e=o.next();e.done?n.push(null):n.push(e.value.toString())},n}var T="function"==typeof Symbol&&Symbol.for,L=Object.prototype.hasOwnProperty,$=T?Symbol.for("react.element"):60103,F=Object.prototype.toString,I=/[^, ]+/g,D=n(["beforeProps","afterCreate","beforeInsert","beforeDelete","beforeUpdate","afterUpdate","beforePatch","afterPatch","beforeUnmount","afterMount"],function(){}),H={"[object Boolean]":2,"[object Number]":3,"[object String]":4,"[object Function]":5,"[object Symbol]":6,"[object Array]":7},P={mountOrder:1,currentOwner:null,controlledCbs:[],fireRef:function(e,t,r){(e._disposed||e._isStateless)&&(t=null);var n=r.ref;if("function"==typeof n)return n(t);if(n&&Object.prototype.hasOwnProperty.call(n,"current"))n.current=t;else if(n){var o=r._owner;if(!o)throw"Element ref was specified as a string ("+n+") but no owner was set";t?(t.nodeType&&(t.getDOMNode=a),o.refs[n]=t):delete o.refs[n]}}};i.prototype={getDOMNode:function(){return this.stateNode||null},$$typeof:$};var R=void 0,W=void 0,B=void 0,V=T&&Symbol.iterator,q="@@iterator",U=v.prototype={contains:Boolean};String("replaceChild,appendChild,removeAttributeNS,setAttributeNS,removeAttribute,setAttribute,getAttribute,insertBefore,removeChild,addEventListener,removeEventListener,attachEvent,detachEvent").replace(/\w+/g,function(e){U[e]=function(){console.log("fire "+e)}});var z=new v;z.createElement=z.createElementNS=z.createDocumentFragment=function(e){return new v(e)},z.createTextNode=z.createComment=Boolean,z.documentElement=new v("html"),z.body=new v("body"),z.nodeName="#document",z.textContent="";try{var G=window;G.alert}catch(e){!1,G={document:z}}var X=G,Z=G.document||z,J=(Z.createDocumentFragment(),{88:7,80:6,"00":NaN,"08":NaN}),K=Z.documentMode||J[o(Z.all)+""+o(X.XMLHttpRequest)],Q=(/NaN|undefined/.test(K),/["'&<>]/),Y=/^-?\d+(\.\d+)?$/,ee=n("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),te=(n("float","cssFloat"),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),re={ref:1,key:1,children:1,dangerouslySetInnerHTML:1,innerHTML:1},ne={styleFloat:"float",cssFloat:"float"},oe=/^xlink:?(.+)/,ae={},ie={select:1,input:1,textarea:1},ue={mark:function(){}},ce=ue.mark(O),fe=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];return{renderToString:E,renderToStaticMarkup:E,renderToNodeStream:_,renderToStaticNodeStream:_}});